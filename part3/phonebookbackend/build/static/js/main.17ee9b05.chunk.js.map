{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["PersonForm","onSubmit","name","onNameChange","number","onNumberChange","value","onChange","type","Person","onDelete","onClick","Persons","values","deleteCB","map","person","key","id","Filter","Notification","messages","length","msg","className","content","baseUrl","_unwrap","promise","then","r","data","axios","get","newObject","post","delete","put","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterKey","setNewFilterKey","notifications","setNotifications","useEffect","personsService","initialPersons","pushNotification","newMsg","Math","floor","random","Number","MAX_SAFE_INTEGER","notifs","concat","setTimeout","filter","n","personsToShow","toLowerCase","includes","event","target","preventDefault","currentPerson","find","p","window","confirm","newPerson","returnedPerson","catch","error","response","message","console","log","status","mayUpdatePerson","JSON","stringify","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.17ee9b05.chunk.js","sourcesContent":["import React from 'react';\n\nconst PersonForm = ({ onSubmit, name, onNameChange, number, onNumberChange }) => {\n\treturn (\n\t\t<form onSubmit={onSubmit}>\n\t\t\t<div>\n\t\t\t\tname: <input value={name} onChange={onNameChange} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tnumber: <input value={number} onChange={onNumberChange} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t</div>\n\t\t</form>\n\t)\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Person = ({ value, onDelete }) => {\n\treturn (\n\t\t<li>\n\t\t\t{value.name} {value.number}\n\t\t\t<button onClick={onDelete}>delete</button>\n\t\t</li>\n\t)\n};\n\nconst Persons = ({ values, deleteCB }) => {\n\treturn (\n\t\t<ul>\n\t\t\t{values.map(person =>\n\t\t\t\t<Person key={person.id} value={person}\n\t\t\t\t\tonDelete={() => deleteCB(person.id)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</ul>\n\t)\n};\n\nexport default Persons;","import React from 'react';\n\nconst Filter = ({ value, onChange }) => {\n\treturn (\n\t\t<div>\n\t\t\tfilter shown with\n\t\t\t<input value={value}\n\t\t\t\tonChange={onChange}\n\t\t\t/>\n\t\t</div>\n\t)\n};\n\nexport default Filter;","import React from 'react';\nimport './Notification.css';\n\nconst Notification = ({ messages }) => {\n\tif (messages.length === 0) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{messages.map(msg => \n\t\t\t\t<p key={msg.id} className={`notification-${msg.type}`}>\n\t\t\t\t\t{msg.content}\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</div>\n\n\t)\n};\n\nexport default Notification;","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst _unwrap = promise => promise.then(r => r.data);\n\nconst getAll = () => {\n\treturn _unwrap(axios.get(baseUrl));\n};\n\nconst create = newObject => {\n\treturn _unwrap(axios.post(baseUrl, newObject));\n};\n\nconst remove = id => {\n\treturn _unwrap(axios.delete(`${baseUrl}/${id}`));\n};\n\nconst update = (id, newObject) => {\n\treturn _unwrap(axios.put(`${baseUrl}/${id}`, newObject));\n};\n\nexport default {\n\tgetAll,\n\tcreate,\n\tremove,\n\tupdate,\n};","import React, { useState, useEffect } from 'react';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport Notification from './components/Notification';\nimport personsService from './services/persons';\n\nconst getUid = () => {\n\treturn Math.floor(Math.random() * Number.MAX_SAFE_INTEGER)\n};\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([]);\n\tconst [newName, setNewName] = useState('');\n\tconst [newNumber, setNewNumber] = useState('');\n\tconst [filterKey, setNewFilterKey] = useState('');\n\tconst [notifications, setNotifications] = useState([])\n\n\tuseEffect(() => {\n\t\tpersonsService\n\t\t\t.getAll()\n\t\t\t.then(initialPersons => {\n\t\t\t\tsetPersons(initialPersons)\n\t\t\t});\n\t}, []);\n\n\tconst pushNotification = (content, type) => {\n\t\tconst newMsg = { content, type, id: getUid() };\n\t\tsetNotifications((notifs) => notifs.concat(newMsg))\n\t\tsetTimeout(() => {\n\t\t\tsetNotifications((notifs) => notifs.filter(n => n !== newMsg));\n\t\t}, 5000);\n\t};\n\n\tconst mayUpdatePerson = (currentPerson) => {\n\t\tconst ok = window.confirm(`${currentPerson.name} is already in the phonebook, replace the old number with a new one?`);\n\t\tif (!ok) {\n\t\t\treturn;\n\t\t}\n\t\tconst newPerson = { ...currentPerson, number: newNumber };\n\t\tpersonsService\n\t\t\t.update(newPerson.id, newPerson)\n\t\t\t.then(returnedPerson => {\n\t\t\t\tpushNotification(\n\t\t\t\t\t`Changed ${returnedPerson.name} number`,\n\t\t\t\t\t'success'\n\t\t\t\t);\n\t\t\t\tsetPersons(persons.map(p =>\n\t\t\t\t\tp.id !== newPerson.id ? p : returnedPerson))\n\t\t\t}).catch(error => {\n\t\t\t\tif (!error.response) {\n\t\t\t\t\treturn pushNotification(error.message, 'error');\n\t\t\t\t}\n\t\t\t\t// assume no network problems\n\t\t\t\tconsole.log(error.response.data);\n\t\t\t\tif (error.response.status === 400) {\n\t\t\t\t\tpushNotification(error.response.data.error, 'error');\n\t\t\t\t} else if (error.response.status === 404) {\n\t\t\t\t\tpushNotification(\n\t\t\t\t\t\t`Information of ${newPerson.name} has already been removed from server`,\n\t\t\t\t\t\t'error'\n\t\t\t\t\t);\n\t\t\t\t\tsetPersons(persons.filter(p => p.id !== newPerson.id));\n\t\t\t\t}\n\t\t\t});\n\t\tsetNewName('');\n\t\tsetNewNumber('');\n\t};\n\n\tconst addPerson = (event) => {\n\t\tevent.preventDefault();\n\t\tconst currentPerson = persons.find(p => p.name === newName);\n\t\tif (currentPerson) {\n\t\t\treturn mayUpdatePerson(currentPerson);\n\t\t}\n\n\t\tconst person = {\n\t\t\tname: newName,\n\t\t\tnumber: newNumber,\n\t\t};\n\t\tpersonsService\n\t\t\t.create(person)\n\t\t\t.then(returnedPerson => {\n\t\t\t\tpushNotification(`Added ${returnedPerson.name}`, 'success');\n\t\t\t\tsetPersons(persons.concat(returnedPerson));\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (!error.response) {\n\t\t\t\t\treturn pushNotification(error.message, 'error');\n\t\t\t\t}\n\t\t\t\tconsole.log(error.response.data);\n\t\t\t\tpushNotification(error.response.data.error, 'error');\n\t\t\t});\n\n\t\tsetNewName('');\n\t\tsetNewNumber('');\n\t};\n\n\tconst deletePerson = (id) => {\n\t\tconst person = persons.find(p => p.id === id);\n\t\tif (window.confirm(`Delete '${person.name}'?`)) {\n\t\t\tpersonsService\n\t\t\t\t.remove(id).then(() => {\n\t\t\t\t\tsetPersons(persons.filter(p => p.id !== id));\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tpushNotification(JSON.stringify(error.message), 'error');\n\t\t\t\t});\n\t\t}\n\t};\n\tconst handleNameChange = (event) => {\n\t\tsetNewName(event.target.value)\n\t};\n\n\tconst handleNumberChange = (event) => {\n\t\tsetNewNumber(event.target.value)\n\t};\n\n\tconst handlefilterKeyChange = (event) => {\n\t\tsetNewFilterKey(event.target.value)\n\t};\n\n\tconst filterPersons = () => {\n\t\treturn persons.filter(person =>\n\t\t\tperson.name.toLowerCase().includes(filterKey.toLowerCase())\n\t\t);\n\t};\n\n\tconst personsToShow = filterKey ? filterPersons() : persons;\n\n\treturn (\n\t\t<div>\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Notification messages={notifications} />\n\t\t\t<Filter value={filterKey}\n\t\t\t\tonChange={handlefilterKeyChange}\n\t\t\t/>\n\t\t\t<h3>Add a new</h3>\n\t\t\t<PersonForm onSubmit={addPerson}\n\t\t\t\tname={newName} onNameChange={handleNameChange}\n\t\t\t\tnumber={newNumber} onNumberChange={handleNumberChange}\n\t\t\t/>\n\t\t\t<h3>Numbers</h3>\n\t\t\t<Persons values={personsToShow}\n\t\t\t\tdeleteCB={deletePerson}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}